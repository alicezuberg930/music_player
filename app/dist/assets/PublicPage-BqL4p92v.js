import{d as e,u as t,j as a,a as r,P as s,e as n,W as i,q as l,X as c,Y as o,Z as d,b as u,$ as h,a0 as x,a1 as m,f}from"./radix-ui-vendor-DnJe5R9i.js";import{c as p,a as g,u as v,C as j,L as b,b as y,d as w,e as k,f as N,g as C,D as M,h as S,i as _,F as E,j as T,k as L,l as R,R as z,m as A,n as $,B as P,o as I,p as q,q as D,r as O,s as F,T as H,t as V,v as U,w as B,x as W,y as K,z as X,A as Z,E as Y,G,H as J,I as Q,J as ee,K as te,M as ae,N as re,O as se,P as ne,Q as ie,S as le,U as ce,X as oe,V as de,W as ue,Y as he,Z as xe,_ as me,$ as fe,a0 as pe,a1 as ge,a2 as ve,a3 as je,a4 as be,a5 as ye,a6 as we,a7 as ke,a8 as Ne}from"./index-20rU2Yl7.js";import{r as Ce,N as Me,c as Se,u as _e,R as Ee,L as Te,h as Le,O as Re}from"./react-vendor-CNls2o2I.js";import"./redux-vendor-BIly1kVG.js";
/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=p("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Ae=p("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),$e=p("circle-pause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]),Pe=p("mic-vocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]),Ie=p("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),qe=p("repeat-1",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]]),De=p("repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]),Oe=p("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Fe=p("shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]),He=p("skip-back",[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]]),Ve=p("skip-forward",[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]]),Ue=p("spotlight",[["path",{d:"M15.295 19.562 16 22",key:"31jsb7"}],["path",{d:"m17 16 3.758 2.098",key:"121ar7"}],["path",{d:"m19 12.5 3.026-.598",key:"19ukd3"}],["path",{d:"M7.61 6.3a3 3 0 0 0-3.92 1.3l-1.38 2.79a3 3 0 0 0 1.3 3.91l6.89 3.597a1 1 0 0 0 1.342-.447l3.106-6.211a1 1 0 0 0-.447-1.341z",key:"lwb9l9"}],["path",{d:"M8 9V2",key:"1xa0v7"}]]),Be=p("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),We=p("volume-1",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]]),Ke=p("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),Xe=p("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);var Ze="Switch",[Ye]=r(Ze),[Ge,Je]=Ye(Ze),Qe=Ce.forwardRef((r,i)=>{const{__scopeSwitch:l,name:c,checked:o,defaultChecked:d,required:u,disabled:h,value:x="on",onCheckedChange:m,form:f,...p}=r,[g,v]=Ce.useState(null),j=e(i,e=>v(e)),b=Ce.useRef(!1),y=!g||(f||!!g.closest("form")),[w,k]=t({prop:o,defaultProp:d??!1,onChange:m,caller:Ze});return a.jsxs(Ge,{scope:l,checked:w,disabled:h,children:[a.jsx(s.button,{type:"button",role:"switch","aria-checked":w,"aria-required":u,"data-state":rt(w),"data-disabled":h?"":void 0,disabled:h,value:x,...p,ref:j,onClick:n(r.onClick,e=>{k(e=>!e),y&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})}),y&&a.jsx(at,{control:g,bubbles:!b.current,name:c,value:x,checked:w,required:u,disabled:h,form:f,style:{transform:"translateX(-100%)"}})]})});Qe.displayName=Ze;var et="SwitchThumb",tt=Ce.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,i=Je(et,r);return a.jsx(s.span,{"data-state":rt(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t})});tt.displayName=et;var at=Ce.forwardRef(({__scopeSwitch:t,control:r,checked:s,bubbles:n=!0,...l},c)=>{const o=Ce.useRef(null),d=e(o,c),u=function(e){const t=Ce.useRef({value:e,previous:e});return Ce.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(s),h=i(r);return Ce.useEffect(()=>{const e=o.current;if(!e)return;const t=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(t,"checked").set;if(u!==s&&a){const t=new Event("click",{bubbles:n});a.call(e,s),e.dispatchEvent(t)}},[u,s,n]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...l,tabIndex:-1,ref:d,style:{...l.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function rt(e){return e?"checked":"unchecked"}at.displayName="SwitchBubbleInput";var st=Qe,nt=tt;function it({className:e,...t}){return a.jsx(st,{"data-slot":"switch",className:g("peer data-[state=checked]:bg-main-500 data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:a.jsx(nt,{"data-slot":"switch-thumb",className:g("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function lt({name:e,label:t,helperText:r,disabled:s,className:n}){const{control:i}=v();return a.jsx(j,{name:e,control:i,render:({field:i,fieldState:{error:l}})=>a.jsxs("div",{className:n,children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(it,{id:e,checked:i.value,onCheckedChange:i.onChange,disabled:s}),t&&a.jsx(b,{htmlFor:e,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:t})]}),(r||l)&&a.jsx("p",{className:"mt-1 text-sm "+(l?"text-destructive":"text-muted-foreground"),children:l?l.message:r})]})})}const ct=({triggerElement:e})=>{const{enqueueSnackbar:t}=y(),[r,s]=Ce.useState(!1),n=w().shape({isPrivate:N().required("Privacy setting is required"),title:k().required("Title is required"),description:k().optional()}),i=C({resolver:q(n),defaultValues:{isPrivate:!0}}),{handleSubmit:l,reset:c,formState:{isSubmitting:o}}=i;return a.jsxs(M,{open:r,onOpenChange:s,children:[a.jsx(S,{asChild:!0,children:e}),a.jsx(_,{className:"sm:max-w-md",children:a.jsxs(E,{methods:i,onSubmit:l(async e=>{try{const a=new FormData;for(const[t,s]of Object.entries(e))a.append(t,s);const r=await D(a);r?.statusCode&&201===r?.statusCode?(s(!1),c(),t(r.message,{variant:"success"})):t("Có lỗi xảy ra khi tạo danh sách phát",{variant:"error"})}catch(a){console.error(a)}}),children:[a.jsxs(T,{children:[a.jsx(L,{children:"Tạo danh sách phát"}),a.jsx(R,{children:"Nhập thông tin danh sách phát của bạn bên dưới."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(z,{name:"title",fieldLabel:"Tiêu đề",placeholder:"Nhập tiêu đề"}),a.jsx(z,{name:"description",fieldLabel:"Mô tả",placeholder:"Nhập mô tả"}),a.jsx(lt,{name:"isPrivate",label:"Riêng tư",helperText:"Đặt chế độ riêng tư"})]}),a.jsxs(A,{children:[a.jsx($,{asChild:!0,children:a.jsx(P,{variant:"outline",children:"Hủy"})}),a.jsx(P,{type:"submit",disabled:o,children:o?a.jsx(I,{strokeColor:"white"}):"Tạo"})]})]})})]})},ot=()=>{const{isAuthenticated:e}=O(),{translate:t}=F();return a.jsx("div",{className:"sm:block hidden lg:w-48 w-20 flex-none border bg-main-200 transition-all duration-1500 ease-in-out",children:a.jsxs("div",{className:"h-full flex flex-col relative",children:[a.jsxs("div",{className:"w-full h-16 py-4 px-6 flex justify-start items-center gap-1",children:[a.jsx("img",{src:"/vite.svg",alt:"logo"}),a.jsx("div",{className:"hidden lg:block",children:a.jsx(H,{className:"m-0 font-semibold",children:"Tiến's MP3"})})]}),a.jsx("div",{className:"flex flex-col",children:V.map(e=>a.jsxs(Me,{to:e.path,className:({isActive:e})=>g("text-gray-500 text-sm py-2 px-6 font-bold flex gap-3 items-center justify-start",e&&"text-[#0F7070] bg-main-100"),children:[e.icon,a.jsx(H,{className:"hidden lg:inline m-0",children:t(e.text)})]},e.path))}),e&&a.jsx(ct,{triggerElement:a.jsxs("div",{className:"text-gray-500 text-sm py-2 px-6 font-bold flex gap-3 items-center justify-start absolute bottom-0 border-t border-gray-400 w-full",children:[a.jsx(Ie,{}),a.jsx(H,{className:"hidden lg:inline m-0",children:t("create_playlist")})]})})]})})},dt="audio-files";let ut=null;const ht=async()=>(ut||(ut=U("music-player-audio",1,{upgrade(e){e.objectStoreNames.contains(dt)||e.createObjectStore(dt)}})),ut);function xt({...e}){return a.jsx(B.Root,{"data-slot":"drawer",...e})}function mt({...e}){return a.jsx(B.Trigger,{"data-slot":"drawer-trigger",...e})}function ft({...e}){return a.jsx(B.Portal,{"data-slot":"drawer-portal",...e})}function pt({className:e,...t}){return a.jsx(B.Overlay,{"data-slot":"drawer-overlay",className:g("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function gt({className:e,children:t,...r}){return a.jsxs(ft,{"data-slot":"drawer-portal",children:[a.jsx(pt,{}),a.jsxs(B.Content,{"data-slot":"drawer-content",className:g("group/drawer-content bg-background fixed z-50 flex h-auto flex-col ","data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg data-[vaul-drawer-direction=top]:border-b","data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg data-[vaul-drawer-direction=bottom]:border-t","data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:border-l data-[vaul-drawer-direction=right]:sm:max-w-sm","data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:border-r data-[vaul-drawer-direction=left]:sm:max-w-sm",e),...r,children:[a.jsx("div",{className:"bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block"}),t]})]})}function vt({className:e,...t}){return a.jsx("div",{"data-slot":"drawer-header",className:g("flex flex-col gap-0.5 p-4 group-data-[vaul-drawer-direction=bottom]/drawer-content:text-center group-data-[vaul-drawer-direction=top]/drawer-content:text-center md:gap-1.5 md:text-left",e),...t})}function jt({className:e,...t}){return a.jsx(B.Title,{"data-slot":"drawer-title",className:g("text-foreground font-semibold",e),...t})}function bt({className:e,...t}){return a.jsx(B.Description,{"data-slot":"drawer-description",className:g("text-muted-foreground text-sm",e),...t})}const yt=({drawerTrigger:e,audioRef:t})=>{const{currentSong:r}=W(e=>e.music),[s,n]=Se.useState(""),[i,l]=Se.useState(0),c=Se.useRef(null),o=Se.useRef(null);return Se.useEffect(()=>{if((async()=>{if(r?.lyricsFile){const e=await fetch(r.lyricsFile),t=await e.text();n(t.replace(/\r\n/g,"\n"))}})(),t.current){const e=setInterval(()=>{t.current&&l(1e3*t.current.currentTime)},1500);return()=>clearInterval(e)}},[t.current]),Se.useEffect(()=>{if(c.current&&o.current){const e=c.current.clientHeight,t=c.current.offsetTop-e/2-c.current.clientHeight/2;o.current.scrollTo({top:t,behavior:"smooth"})}},[i]),a.jsxs(xt,{children:[a.jsx(mt,{asChild:!0,children:e}),a.jsx(gt,{className:"bg-white/70 min-h-[calc(100vh-96px)] backdrop-blur-md",children:a.jsxs("div",{className:"mx-auto w-full h-screen max-w-6xl relative",children:[a.jsxs(vt,{children:[a.jsx(jt,{children:"Lời bài hát"}),a.jsxs(bt,{children:[r?.title," - ",r?.artistNames]})]}),a.jsx("div",{ref:o,className:"h-[65vh] overflow-auto px-4",children:s.length>0?a.jsx(K,{lrc:s,currentMillisecond:i,lineRenderer:({index:e,active:t,line:r})=>a.jsx(H,{ref:t?c:null,variant:"h4",className:"my-8 text-center transition-colors duration-300 "+(t?"text-main-500":"text-gray-400"),children:r.content},e)}):a.jsx(H,{className:"text-center text-gray-400",children:"Không có lời bài hát"})})]})})]})},wt=()=>{const e=X(),{showSideBarRight:t}=W(e=>e.app),{currentSong:r,isPlaying:s,currentPlaylistSongs:n}=W(e=>e.music),[i,l]=Ce.useState(!1),[c,o]=Ce.useState(0),[d,u]=Ce.useState(50),[h,x]=Ce.useState(!0),m=Ce.useRef(!1),f=Ce.useRef(0),p=Ce.useRef(null),g=Ce.useRef(null),v=Ce.useRef(null),j=Ce.useRef(null),b=Ce.useRef(!1),y=Ce.useMemo(()=>{if(!r)return;const e=n.findIndex(e=>e.id===r.id);return-1===e?void 0:n[e+1]},[r,n]),w=e=>{if(!g.current||!v.current||!p.current)return;const t=g.current.getBoundingClientRect(),a=(e-t.left)/t.width*100,s=Math.max(0,Math.min(100,Math.round(a)));p.current.style.cssText=`right: ${100-s}%`,r?.duration&&(v.current.currentTime=r.duration*s/100)},k=()=>{b.current=!1},N=Ce.useCallback(()=>{if(n.length>0)for(let t=0;t<n.length;t++)if(n[t].id===r?.id){n[t+1]&&(e(Z(n[t+1])),v.current?.play());break}},[n,r,e]),C=Ce.useCallback(()=>{if(n.length>0)for(let t=0;t<n.length;t++)if(n[t].id===r?.id){n[t-1]&&(e(Z(n[t-1])),v.current?.play());break}},[n,r,e]),M=Ce.useCallback(async()=>{v.current&&(s&&!v.current.paused?(e(Y(!1)),v.current.pause()):!s&&v.current.paused&&(e(Y(!0)),await v.current.play()))},[s,e]),S=()=>{let t;const a=v.current;if(!a?.src)return;const s=()=>{j.current.innerText=ne(Math.floor(a.currentTime));let e=Math.round(a.currentTime/r.duration*1e4)/100;p.current&&(p.current.style.cssText=`right: ${100-e}%`),t=requestAnimationFrame(s)},n=()=>t=requestAnimationFrame(s),i=()=>cancelAnimationFrame(t),l=()=>{i(),m.current?v.current&&v.current.play():f.current>0?1===f.current?v.current&&(v.current.currentTime=0,v.current.play()):N():(e(Y(!1)),a.pause())};return a.addEventListener("play",n),a.addEventListener("pause",i),a.addEventListener("ended",l),()=>{a.removeEventListener("play",n),a.removeEventListener("pause",i),a.removeEventListener("ended",l),cancelAnimationFrame(t)}},_=()=>{x(!1),v.current?.play().then(t=>e(Y(!0))).catch(e=>console.log("Auto play was prevented because user didnt interact with the document"))},E=async()=>{if(e(Y(!1)),j.current&&(j.current.innerText="00:00"),p.current&&(p.current.style.cssText="right: 100%"),r?.stream){x(!0);await(async e=>{try{const t=await ht();return!!(await t.get(dt,e))}catch(t){return console.error(`Error checking cache for song ${e}:`,t),!1}})(r.id)||await(async(e,t)=>{try{const a=await fetch(t);if(!a.ok)throw new Error(`Failed to fetch audio: ${a.statusText}`);const r=await a.blob(),s=await ht();return await s.put(dt,{songId:e,blob:r,url:t,cachedAt:Date.now()},e),console.log(`Audio cached successfully for song: ${e}`),!0}catch(a){return console.error(`Error caching audio for song ${e}:`,a),!1}})(r.id,r.stream);let e=await(async e=>{try{const t=await ht(),a=await t.get(dt,e);if(a){const t=URL.createObjectURL(a.blob);return console.log(`Audio retrieved from cache for song: ${e}`),t}return null}catch(t){return console.error(`Error retrieving audio from cache for song ${e}:`,t),null}})(r.id);e&&(v.current=new Audio(e),v.current.load(),v.current.volume=d/100,v.current.oncanplaythrough=_,S())}};return Ce.useEffect(()=>(E(),()=>{v.current&&(v.current.oncanplaythrough=null,v.current.pause(),v.current=null)}),[r]),Ce.useEffect(()=>{const e=e=>{if("Space"===e.code&&e.target instanceof HTMLElement){const t=e.target.tagName.toLowerCase();if("input"===t||"textarea"===t||e.target.isContentEditable)return;e.preventDefault(),M()}},t=e=>{if(("ArrowLeft"===e.code||"ArrowRight"===e.code)&&e.target instanceof HTMLElement){const t=e.target.tagName.toLowerCase();if("input"===t||"textarea"===t||e.target.isContentEditable)return;e.preventDefault(),"ArrowLeft"===e.code&&C(),"ArrowRight"===e.code&&N()}};return globalThis.addEventListener("keydown",e),globalThis.addEventListener("keydown",t),()=>{globalThis.removeEventListener("keydown",e),globalThis.removeEventListener("keydown",t)}},[s,M,C,N]),Ce.useEffect(()=>{v.current&&(v.current.volume=d/100)},[d]),Ce.useEffect(()=>{e(G()),m.current=i},[i]),Ce.useEffect(()=>{f.current=c},[c]),Ce.useEffect(()=>{v.current&&v.current.paused&&s&&v.current.play(),!v.current||v.current.paused||s||v.current.pause()},[s]),a.jsx("div",{className:"fixed w-full z-20 h-24 content-center bg-main-400 select-none border-t border-main-500/20 shadow-up",children:a.jsxs("div",{className:"flex justify-between px-4",children:[a.jsxs("div",{className:"flex-1 items-center gap-4 hidden md:flex",children:[a.jsx(J.LazyLoadImage,{src:r?.thumbnail,effect:"blur",alt:"thumbnail",className:"w-16 h-16 object-cover"}),a.jsxs("div",{children:[a.jsx(H,{className:"font-semibold text-gray-600 line-clamp-2 text-ellipsis max-w-40",children:r?.title}),a.jsx(H,{className:"text-gray-500 line-clamp-2 text-ellipsis max-w-40 m-0 lg:text-xs",children:r?.artistNames})]}),a.jsx(Q,{size:20}),a.jsx(ee,{size:20})]}),a.jsxs("div",{className:"flex flex-1 items-center gap-4 flex-col",children:[a.jsxs("div",{className:"flex gap-8 items-center",children:[a.jsxs(te,{children:[a.jsx(ae,{asChild:!0,className:`cursor-pointer ${i&&"text-purple-600"}`,onClick:()=>l(e=>!e),children:a.jsx(Fe,{size:20})}),a.jsx(re,{children:"Bật phát ngẫu nhiên"})]}),a.jsx("span",{className:""+(n.length?"cursor-pointer":"text-gray-500"),children:a.jsx(He,{size:20,onClick:C})}),a.jsx("span",{onClick:M,className:"hover:text-main-500",children:h?a.jsx(I,{strokeColor:"#0E8080",width:42,height:42}):s?a.jsx($e,{size:42}):a.jsx(se,{size:42})}),a.jsxs(te,{children:[a.jsx(ae,{asChild:!0,children:a.jsx("span",{className:""+(n.length?"cursor-pointer":"text-gray-500"),children:a.jsx(Ve,{size:20,onClick:N})})}),y&&a.jsxs(re,{children:[a.jsx(H,{className:"font-semibold",children:"Phát tiếp theo"}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsx(J.LazyLoadImage,{src:y.thumbnail,effect:"blur",alt:"thumbnail",className:"w-10 h-10 object-cover rounded-md"}),a.jsxs("div",{children:[a.jsx(H,{className:"m-0 text-gray-400",children:y.title}),a.jsx(H,{className:"m-0 text-gray-400",children:y.artistNames})]})]})]})]}),a.jsxs(te,{children:[a.jsx(ae,{asChild:!0,className:`cursor-pointer ${c&&"text-purple-600"}`,onClick:()=>o(2===c?0:c+1),children:1===c?a.jsx(qe,{size:20}):a.jsx(De,{size:20})}),a.jsx(re,{children:"Phát lại tất cả bài hát"})]})]}),a.jsxs("div",{className:"w-full flex items-center justify-center gap-3 text-sm",children:[a.jsx(H,{ref:j,className:"font-semibold text-gray-500 m-0",children:"00:00"}),a.jsx("div",{className:"relative h-1 hover:h-2 bg-[#0000001a] w-3/5 rounded-full cursor-pointer",onClick:e=>{w(e.clientX)},onMouseDown:e=>{b.current=!0,w(e.clientX)},onMouseMove:e=>{b.current&&w(e.clientX)},onMouseUp:k,onMouseLeave:k,ref:g,children:a.jsx("div",{ref:p,className:"absolute top-0 left-0 bottom-0 h-full bg-main-500 rounded-full"})}),a.jsx(H,{className:"font-semibold text-gray-500 m-0",children:ne(r?.duration??0)})]})]}),a.jsxs("div",{className:"flex-1 items-center gap-4 hidden md:flex justify-end",children:[a.jsx(yt,{drawerTrigger:a.jsx(Pe,{size:20}),audioRef:v}),a.jsx(P,{size:"icon-lg",variant:"ghost",onClick:()=>u(0===d?50:0),children:d>=50?a.jsx(Ke,{}):0===d?a.jsx(Xe,{}):a.jsx(We,{})}),a.jsx("input",{type:"range",step:1,min:0,max:100,onChange:e=>u(Number(e.target.value)),value:d,className:"h-1 hover:h-2"}),a.jsx(P,{className:"text-white",size:"lg",onClick:()=>e(le(!t)),children:a.jsx(ie,{})})]})]})})},kt=()=>{const{translate:e}=F(),t=_e(),[r,s]=Ce.useState("");return a.jsx("div",{className:"max-w-[440px] w-full",children:a.jsx("div",{className:"bg-[#ffffff54] text-gray-500 rounded-3xl py-2",children:a.jsxs("div",{className:"flex w-full",children:[a.jsx("div",{className:"pl-4 self-center",children:a.jsx(ce,{})}),a.jsx("input",{type:"text",className:"outline-none px-4 w-full bg-transparent",placeholder:e("search_placeholder"),onKeyUp:e=>(e=>{"Enter"===e.code&&e.currentTarget.value.length>2&&t({pathname:"search/all",search:"?q="+e.currentTarget.value})})(e),onChange:e=>{s(e.target.value)},value:r}),a.jsx("div",{className:(r?"block":"hidden")+" self-center pr-4",onClick:()=>s(""),children:a.jsx(oe,{})})]})})})};function Nt(...e){const t=e[0];if(1===e.length)return t;const a=()=>{const a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=a.reduce((t,{useScope:a,scopeName:r})=>({...t,...a(e)[`__scope${r}`]}),{});return Ce.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return a.scopeName=t.scopeName,a}var Ct=Symbol.for("react.lazy"),Mt=Ee[" use ".trim().toString()];function St(e){return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===Ct&&"_payload"in e&&("object"==typeof(t=e._payload)&&null!==t&&"then"in t);var t}function _t(e){const t=Et(e),r=Ce.forwardRef((e,r)=>{let{children:s,...n}=e;St(s)&&"function"==typeof Mt&&(s=Mt(s._payload));const i=Ce.Children.toArray(s),l=i.find(Lt);if(l){const e=l.props.children,s=i.map(t=>t===l?Ce.Children.count(e)>1?Ce.Children.only(null):Ce.isValidElement(e)?e.props.children:null:t);return a.jsx(t,{...n,ref:r,children:Ce.isValidElement(e)?Ce.cloneElement(e,void 0,s):null})}return a.jsx(t,{...n,ref:r,children:s})});return r.displayName=`${e}.Slot`,r}function Et(e){const t=Ce.forwardRef((e,t)=>{let{children:a,...r}=e;if(St(a)&&"function"==typeof Mt&&(a=Mt(a._payload)),Ce.isValidElement(a)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,a=t&&"isReactWarning"in t&&t.isReactWarning;if(a)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,a=t&&"isReactWarning"in t&&t.isReactWarning,a)return e.props.ref;return e.props.ref||e.ref}(a),s=function(e,t){const a={...t};for(const r in t){const s=e[r],n=t[r];/^on[A-Z]/.test(r)?s&&n?a[r]=(...e)=>{const t=n(...e);return s(...e),t}:s&&(a[r]=s):"style"===r?a[r]={...s,...n}:"className"===r&&(a[r]=[s,n].filter(Boolean).join(" "))}return{...e,...a}}(r,a.props);return a.type!==Ce.Fragment&&(s.ref=t?l(t,e):e),Ce.cloneElement(a,s)}return Ce.Children.count(a)>1?Ce.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Tt=Symbol("radix.slottable");function Lt(e){return Ce.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Tt}var Rt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const r=_t(`Primitive.${t}`),s=Ce.forwardRef((e,s)=>{const{asChild:n,...i}=e,l=n?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),a.jsx(l,{...i,ref:s})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function zt(){return()=>{}}var At="Avatar",[$t]=function(e,t=[]){let r=[];const s=()=>{const t=r.map(e=>Ce.createContext(e));return function(a){const r=a?.[e]||t;return Ce.useMemo(()=>({[`__scope${e}`]:{...a,[e]:r}}),[a,r])}};return s.scopeName=e,[function(t,s){const n=Ce.createContext(s);n.displayName=t+"Context";const i=r.length;r=[...r,s];const l=t=>{const{scope:r,children:s,...l}=t,c=r?.[e]?.[i]||n,o=Ce.useMemo(()=>l,Object.values(l));return a.jsx(c.Provider,{value:o,children:s})};return l.displayName=t+"Provider",[l,function(a,r){const l=r?.[e]?.[i]||n,c=Ce.useContext(l);if(c)return c;if(void 0!==s)return s;throw new Error(`\`${a}\` must be used within \`${t}\``)}]},Nt(s,...t)]}(At),[Pt,It]=$t(At),qt=Ce.forwardRef((e,t)=>{const{__scopeAvatar:r,...s}=e,[n,i]=Ce.useState("idle");return a.jsx(Pt,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:i,children:a.jsx(Rt.span,{...s,ref:t})})});qt.displayName=At;var Dt="AvatarImage",Ot=Ce.forwardRef((e,t)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:n=()=>{},...i}=e,l=It(Dt,r),d=function(e,{referrerPolicy:t,crossOrigin:a}){const r=de.useSyncExternalStore(zt,()=>!0,()=>!1),s=Ce.useRef(null),n=r?(s.current||(s.current=new window.Image),s.current):null,[i,l]=Ce.useState(()=>Vt(n,e));return o(()=>{l(Vt(n,e))},[n,e]),o(()=>{const e=e=>()=>{l(e)};if(!n)return;const r=e("loaded"),s=e("error");return n.addEventListener("load",r),n.addEventListener("error",s),t&&(n.referrerPolicy=t),"string"==typeof a&&(n.crossOrigin=a),()=>{n.removeEventListener("load",r),n.removeEventListener("error",s)}},[n,a,t]),i}(s,i),u=c(e=>{n(e),l.onImageLoadingStatusChange(e)});return o(()=>{"idle"!==d&&u(d)},[d,u]),"loaded"===d?a.jsx(Rt.img,{...i,ref:t,src:s}):null});Ot.displayName=Dt;var Ft="AvatarFallback",Ht=Ce.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:s,...n}=e,i=It(Ft,r),[l,c]=Ce.useState(void 0===s);return Ce.useEffect(()=>{if(void 0!==s){const e=window.setTimeout(()=>c(!0),s);return()=>window.clearTimeout(e)}},[s]),l&&"loaded"!==i.imageLoadingStatus?a.jsx(Rt.span,{...n,ref:t}):null});function Vt(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}Ht.displayName=Ft;var Ut=qt,Bt=Ot,Wt=Ht;function Kt({className:e,...t}){return a.jsx(Ut,{"data-slot":"avatar",className:g("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...t})}function Xt({className:e,...t}){return a.jsx(Bt,{"data-slot":"avatar-image",className:g("aspect-square size-full",e),...t})}function Zt({className:e,...t}){return a.jsx(Wt,{"data-slot":"avatar-fallback",className:g("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}const Yt=()=>{const{user:e,signout:t}=O(),{translate:r}=F();return a.jsxs(ue,{children:[a.jsx(he,{asChild:!0,children:a.jsx(Kt,{children:e?.avatar?a.jsx(Xt,{src:e?.avatar,alt:e?.id}):a.jsx(Zt,{children:e?.fullname.charAt(0)})})}),a.jsxs(xe,{className:"w-56 z-100",align:"end",children:[a.jsx(me,{children:r("my_account")}),a.jsxs(fe,{children:[a.jsxs(pe,{children:[a.jsx(Te,{to:ge.UPLOAD_MUSIC,children:r("profile")}),a.jsx(ve,{children:a.jsx(je,{})})]}),a.jsxs(pe,{children:[a.jsx(Te,{to:ge.UPLOAD_MUSIC,children:r("settings")}),a.jsx(ve,{children:a.jsx(Oe,{})})]}),a.jsxs(pe,{children:[a.jsx(Te,{to:ge.UPLOAD_MUSIC,children:r("upload_music")}),a.jsx(ve,{children:a.jsx(Be,{})})]}),a.jsxs(pe,{children:[a.jsx(Te,{to:ge.ADD_ARTIST,children:r("add_artist")}),a.jsx(ve,{children:a.jsx(Ue,{})})]})]}),a.jsx(be,{}),a.jsx(pe,{onClick:t,children:r("logout")})]})]})},Gt=()=>{const{onChangeLang:e,currentLang:t,allLangs:r}=F();return a.jsxs(ue,{children:[a.jsx(he,{asChild:!0,children:a.jsx(Kt,{className:"rounded-sm",children:a.jsx(Xt,{src:t.icon,alt:t.value})})}),a.jsx(xe,{className:"w-56 z-100",align:"end",children:a.jsx(fe,{children:r.map(t=>a.jsxs(pe,{onClick:()=>e(t.value),children:[a.jsx(H,{children:t.label}),a.jsx(ve,{children:a.jsx("img",{src:t.icon,alt:t.value})})]},t.value))})})]})};var Jt="Tabs",[Qt]=r(Jt,[h]),ea=h(),[ta,aa]=Qt(Jt),ra=Ce.forwardRef((e,r)=>{const{__scopeTabs:n,value:i,onValueChange:l,defaultValue:c,orientation:o="horizontal",dir:h,activationMode:x="automatic",...m}=e,f=d(h),[p,g]=t({prop:i,onChange:l,defaultProp:c??"",caller:Jt});return a.jsx(ta,{scope:n,baseId:u(),value:p,onValueChange:g,orientation:o,dir:f,activationMode:x,children:a.jsx(s.div,{dir:f,"data-orientation":o,...m,ref:r})})});ra.displayName=Jt;var sa="TabsList",na=Ce.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...i}=e,l=aa(sa,r),c=ea(r);return a.jsx(x,{asChild:!0,...c,orientation:l.orientation,dir:l.dir,loop:n,children:a.jsx(s.div,{role:"tablist","aria-orientation":l.orientation,...i,ref:t})})});na.displayName=sa;var ia="TabsTrigger",la=Ce.forwardRef((e,t)=>{const{__scopeTabs:r,value:i,disabled:l=!1,...c}=e,o=aa(ia,r),d=ea(r),u=da(o.baseId,i),h=ua(o.baseId,i),x=i===o.value;return a.jsx(m,{asChild:!0,...d,focusable:!l,active:x,children:a.jsx(s.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":h,"data-state":x?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:u,...c,ref:t,onMouseDown:n(e.onMouseDown,e=>{l||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(i)}),onKeyDown:n(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(i)}),onFocus:n(e.onFocus,()=>{const e="manual"!==o.activationMode;x||l||!e||o.onValueChange(i)})})})});la.displayName=ia;var ca="TabsContent",oa=Ce.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:i,children:l,...c}=e,o=aa(ca,r),d=da(o.baseId,n),u=ua(o.baseId,n),h=n===o.value,x=Ce.useRef(h);return Ce.useEffect(()=>{const e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),a.jsx(f,{present:i||h,children:({present:r})=>a.jsx(s.div,{"data-state":h?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":d,hidden:!r,id:u,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:x.current?"0s":void 0},children:r&&l})})});function da(e,t){return`${e}-trigger-${t}`}function ua(e,t){return`${e}-content-${t}`}oa.displayName=ca;var ha=ra,xa=na,ma=la,fa=oa;function pa({className:e,...t}){return a.jsx(ha,{"data-slot":"tabs",className:g("flex flex-col gap-2",e),...t})}function ga({className:e,...t}){return a.jsx(xa,{"data-slot":"tabs-list",className:g("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function va({className:e,...t}){return a.jsx(ma,{"data-slot":"tabs-trigger",className:g("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function ja({className:e,...t}){return a.jsx(fa,{"data-slot":"tabs-content",className:g("flex-1 outline-none",e),...t})}const ba=()=>{const{translate:e}=F();return a.jsxs(M,{children:[a.jsx(S,{asChild:!0,children:a.jsx(H,{variant:"span",className:"text-white",children:e("sign_in")})}),a.jsx(_,{className:"sm:max-w-md",children:a.jsxs(pa,{defaultValue:"sign_in",children:[a.jsxs(ga,{children:[a.jsx(va,{value:"sign_in",children:e("sign_in")}),a.jsx(va,{value:"sign_up",children:e("sign_up")})]}),a.jsx(ja,{value:"sign_in",children:a.jsx(ye,{})}),a.jsx(ja,{value:"sign_up",children:a.jsx(we,{})})]})})]})},ya=()=>{const e=_e(),{isAuthenticated:t}=O();return a.jsxs("div",{className:"w-full flex items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex my-2 gap-2 flex-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 text-white cursor-pointer",children:[a.jsx(ze,{onClick:()=>e(-1)}),a.jsx(Ae,{onClick:()=>e(1)})]}),a.jsx(kt,{})]}),a.jsx(Gt,{}),t?a.jsx(Yt,{}):a.jsx(ba,{})]})},wa=()=>{const{showSideBarRight:e,scrollTop:t}=W(e=>e.app),{currentSong:r}=W(e=>e.music),s=Le(),n=X();return a.jsxs("div",{className:"w-full bg-main-300 "+(r?"h-[calc(100vh-96px)]":"h-screen"),children:[a.jsxs("div",{className:"w-full h-full flex",children:[a.jsx(ot,{}),a.jsxs("div",{className:"flex-1 flex flex-col relative",children:[a.jsx("div",{className:`fixed top-0 right-0 left-0 z-100 transition-all duration-1500 ease-in-out sm:left-20 lg:left-48 flex-none backdrop-blur-md px-4 md:px-8 ${e&&"xl:right-[330px]"} ${t?"bg-transparent":"bg-[#969696cc]"}`,children:a.jsx(ya,{})}),a.jsx("div",{className:`flex-auto overflow-y-scroll scroll-smooth transition-all duration-1500 ease-in-out ${e&&"xl:mr-[330px] mr-0"}`,onScroll:e=>{(s.pathname.includes("/artist")||s.pathname.includes("/zing-chart"))&&0===e.currentTarget.scrollTop?n(Ne(!0)):n(Ne(!1))},children:a.jsx("div",{className:"px-4 md:px-8 mt-20 mb-6",children:a.jsx(Re,{})})})]}),a.jsx(ke,{})]}),r&&a.jsx(wt,{})]})};export{wa as default};
