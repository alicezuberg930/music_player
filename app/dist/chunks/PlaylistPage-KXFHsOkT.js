import{j as s}from"./radix-ui-chunk-CKI-Y2yK.js";import{f as a,a as e,k as t,N as i}from"./react-chunk-lWhfHSeX.js";import{a4 as l,a as n,_ as r,u as c,a5 as d,a6 as m,e as o,a7 as h,b as u,T as x,a8 as p,a9 as j,$ as f,aa as g,ab as y,s as N}from"../entries/index-CVAUm5od.js";import{m as b}from"./mix-chunk-CKIEerH-.js";import"./i18next-chunk-BHxx249G.js";import"./redux-chunk-DUkfmT9l.js";function k(s,a){const e=a;return s?l(new Date(s),e):""}const v=()=>{const{id:l}=a(),v=n(),w=r(),{currentSong:S,isPlaying:C,currentPlaylistSongs:P}=c(s=>s.music),[$,z]=e.useState(null),[M,D]=e.useState(!1),L=t();return d({title:`Playlist - ${$?.title??"Yukikaze Music Player"}`,description:$?.description??"Nghe danh sách phát của bạn trên Yukikaze Music Player.",image:$?.thumbnail??`${m()}/web-app-manifest-512x512.png`,url:`${m()}/playlist/${l}`}),e.useEffect(()=>{(async()=>{try{const s=await g(l);200===s.statusCode&&(z(s.data??null),L.state?.playAlbum&&(v(y(s.data?.songs??[])),v(N(s.data?.songs[0])),v(u(!0)),globalThis.history.replaceState({},document.title)))}catch(s){}})()},[]),e.useEffect(()=>{S&&D(P.some(s=>s.id===S.id))},[S]),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex flex-col md:flex-row gap-6",children:$&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"w-full md:w-1/4 h-fit space-y-3 relative md:sticky top-0 self-start shrink-0",children:[s.jsxs("div",{className:"relative",children:[s.jsx(o.LazyLoadImage,{src:$.thumbnail,alt:"thumbnail",effect:"blur",className:"w-full aspect-square rounded-lg",wrapperClassName:"w-full"}),s.jsx("div",{className:(M&&C?"rounded-full":"rounded-md")+" text-white absolute top-0 left-0 bottom-0 right-0 flex items-center justify-center",children:s.jsx("button",{onClick:()=>v(u(!C)),children:M&&C?s.jsx(h,{color:"white",width:48,height:48}):s.jsx(b,{size:48})})})]}),s.jsx(x,{className:"text-center",variant:"h5",children:$.title}),s.jsxs("div",{className:"flex flex-col items-center gap-2 text-gray-500 text-xs",children:[s.jsxs("span",{children:["Cập nhật: ",k($.updatedAt,"dd-MM-yyyy")]}),s.jsx(i,{to:"artist",className:"text-center",children:$.artistNames}),s.jsxs("span",{children:[p($.likes)," người yêu thích"]})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Lời tựa: "}),s.jsx("span",{children:$.description})]}),s.jsx(j,{songs:$.songs,playlistTitle:$.title,totalDuration:$.totalDuration})]})]})}),s.jsxs("div",{className:"mt-12",children:[s.jsx(x,{variant:"h5",className:"mb-4",children:"Các họa sĩ trong danh sách"}),s.jsx("div",{className:"flex -mx-2",children:$?.artists?.slice(0,w?2:5).map(a=>s.jsx(f,{visibleSlides:w?2:5,artist:a},a?.id))})]})]})};export{v as default};
