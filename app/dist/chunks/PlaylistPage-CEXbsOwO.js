import{a as s,j as a}from"./react-query-chunk-C3JHXiwa.js";import{a as e,Y as t,u as i,a2 as l,a3 as r,L as n,b as c,T as d,a4 as m,a5 as o,Z as h,a6 as u,a7 as x,s as p}from"../entries/index-6LPxpzWC.js";import{f as j,e as f,l as g,A as y,N}from"./react-chunk-vjlR_Xb7.js";import{m as k}from"./mix-chunk-Csz3FfyW.js";import"./i18next-chunk-DrW9RIaf.js";import"./radix-ui-chunk-BJyeau2d.js";import"./redux-chunk-DOlE0zqP.js";import"./form-chunk-DWXro7yB.js";function b(s,a){const e=a;return s?j(new Date(s),e):""}const v=()=>{const{id:j}=f(),v=e(),w=t(),{currentSong:S,isPlaying:C,currentPlaylistSongs:P}=i(s=>s.music),[M,$]=s.useState(null),[z,A]=s.useState(!1),D=g();return l({title:`Playlist - ${M?.title??"Yukikaze Music Player"}`,description:M?.description??"Nghe danh sách phát của bạn trên Yukikaze Music Player.",image:M?.thumbnail??`${r()}/web-app-manifest-512x512.png`,url:`${r()}/playlist/${j}`}),s.useEffect(()=>{(async()=>{try{const s=await u(j);200===s.statusCode&&($(s.data??null),D.state?.playAlbum&&(v(x(s.data?.songs??[])),v(p(s.data?.songs[0])),v(c(!0)),globalThis.history.replaceState({},document.title)))}catch(s){}})()},[]),s.useEffect(()=>{S&&A(P.some(s=>s.id===S.id))},[S]),a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex flex-col md:flex-row gap-6",children:M&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"w-full md:w-1/4 h-fit space-y-3 relative md:sticky top-0 self-start shrink-0",children:[a.jsxs("div",{className:"relative",children:[a.jsx(n,{src:M.thumbnail,alt:"thumbnail",effect:"blur",className:"w-full aspect-square rounded-lg",wrapperClassName:"w-full"}),a.jsx("div",{className:(z&&C?"rounded-full":"rounded-md")+" text-white absolute top-0 left-0 bottom-0 right-0 flex items-center justify-center",children:a.jsx("button",{onClick:()=>v(c(!C)),children:z&&C?a.jsx(y,{color:"white",width:48,height:48}):a.jsx(k,{size:48})})})]}),a.jsx(d,{className:"text-center",variant:"h5",children:M.title}),a.jsxs("div",{className:"flex flex-col items-center gap-2 text-gray-500 text-xs",children:[a.jsxs("span",{children:["Cập nhật: ",b(M.updatedAt,"dd-MM-yyyy")]}),a.jsx(N,{to:"artist",className:"text-center",children:M.artistNames}),a.jsxs("span",{children:[m(M.likes)," người yêu thích"]})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Lời tựa: "}),a.jsx("span",{children:M.description})]}),a.jsx(o,{songs:M.songs,playlistTitle:M.title,totalDuration:M.totalDuration})]})]})}),a.jsxs("div",{className:"mt-12",children:[a.jsx(d,{variant:"h5",className:"mb-4",children:"Các họa sĩ trong danh sách"}),a.jsx("div",{className:"flex -mx-2",children:M?.artists?.slice(0,w?2:5).map(s=>a.jsx(h,{visibleSlides:w?2:5,artist:s},s?.id))})]})]})};export{v as default};
