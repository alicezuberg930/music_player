import{j as s}from"./radix-ui-vendor-Buyt95xJ.js";import{f as a,r as e,k as t,N as i}from"./react-vendor-CeLBa8wC.js";import{a0 as l,b as r,a1 as n,u as c,a2 as d,a3 as o,f as m,a4 as x,C as h,d as u,T as p,a5 as f,a6 as j,a7 as g,a8 as y,a9 as N,s as v}from"./index-Bgm4bWT9.js";import"./redux-vendor-DaFkugUR.js";function b(s,a){const e=a;return s?l(new Date(s),e):""}const w=()=>{const{id:l}=a(),w=r(),k=n(),{currentSong:C,isPlaying:S,currentPlaylistSongs:P}=c(s=>s.music),[z,M]=e.useState(null),[D,L]=e.useState(!1),T=t();d({title:z?.title??"Playlist - Yukikaze Music Player",description:z?.description??"Nghe danh sách phát của bạn trên Yukikaze Music Player.",image:z?.thumbnail??`${o()}/web-app-manifest-512x512.png`,url:`${o()}/playlist/${l}`});return e.useEffect(()=>{(async()=>{try{const s=await y(l);s.statusCode&&200===s.statusCode&&(M(s.data),T.state?.playAlbum&&(w(N(s.data.songs)),w(v(s.data.songs[0])),w(u(!0)),globalThis.history.replaceState({},document.title)))}catch(s){console.error(s)}})()},[]),e.useEffect(()=>{C&&L(P.some(s=>s.id===C.id))},[C]),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex flex-col md:flex-row gap-6",children:z&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"w-full md:w-1/4 h-fit space-y-3 relative md:sticky md:top-20 self-start shrink-0",children:[s.jsxs("div",{className:"relative",children:[s.jsx(m.LazyLoadImage,{src:z.thumbnail,alt:"thumbnail",effect:"blur",className:"w-full aspect-square rounded-lg",wrapperClassName:"w-full"}),s.jsx("div",{className:(D&&S?"rounded-full":"rounded-md")+" text-white absolute top-0 left-0 bottom-0 right-0 flex items-center justify-center",children:s.jsx("span",{onClick:()=>w(u(!S)),children:D&&S?s.jsx(x,{color:"white",width:48,height:48}):s.jsx(h,{size:48})})})]}),s.jsx(p,{className:"text-center",variant:"h5",children:z.title}),s.jsxs("div",{className:"flex flex-col items-center gap-2 text-gray-500 text-xs",children:[s.jsxs("span",{children:["Cập nhật: ",b(z.updatedAt,"dd-MM-yyyy")]}),s.jsx(i,{to:"artist",className:"text-center",children:z.artistNames}),s.jsxs("span",{children:[f(z.likes)," người yêu thích"]})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Lời tựa: "}),s.jsx("span",{children:z.description})]}),s.jsx(j,{songs:z.songs,playlistTitle:z.title,totalDuration:z.totalDuration})]})]})}),s.jsxs("div",{className:"mt-12",children:[s.jsx(p,{variant:"h5",className:"mb-4",children:"Các họa sĩ trong danh sách"}),s.jsx("div",{className:"flex -mx-2",children:z?.artists?.slice(0,k?2:5).map(a=>s.jsx(g,{visibleSlides:k?2:5,artist:a},a?.id))})]})]})};export{w as default};
